<Window
    x:Class="ChaosSeed.WinUI3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ChaosSeed.WinUI3"
    xmlns:pages="using:ChaosSeed.WinUI3.Pages"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Custom title bar (Win11 native feel) -->
        <Grid
            x:Name="AppTitleBar"
            Height="{StaticResource ChaosTitleBarHeight}"
            Background="Transparent"
            Padding="12,0,12,0"
            VerticalAlignment="Top">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <muxc:SymbolIcon Symbol="Globe" Margin="0,0,10,0" />
            <TextBlock
                Grid.Column="1"
                Text="Chaos Seed"
                VerticalAlignment="Center"
                FontWeight="SemiBold"
                Opacity="0.95" />
        </Grid>

            <muxc:NavigationView
                x:Name="Nav"
                Grid.Row="1"
            IsBackButtonVisible="Collapsed"
            IsSettingsVisible="False"
            PaneDisplayMode="Left"
            IsPaneOpen="False"
            OpenPaneLength="176"
            CompactPaneLength="40"
                SelectionChanged="OnSelectionChanged">
            <muxc:NavigationView.MenuItems>
                <muxc:NavigationViewItem Content="首页" Tag="home">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Home" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="分类" Tag="categories">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="AllApps" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="直播" Tag="live">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Play" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="弹幕" Tag="danmaku">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Comment" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="歌词" Tag="lyrics">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Document" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
                <muxc:NavigationViewItem Content="歌曲" Tag="music">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Audio" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
            </muxc:NavigationView.MenuItems>

            <muxc:NavigationView.FooterMenuItems>
                <muxc:NavigationViewItem Content="设置" Tag="settings">
                    <muxc:NavigationViewItem.Icon>
                        <muxc:SymbolIcon Symbol="Setting" />
                    </muxc:NavigationViewItem.Icon>
                </muxc:NavigationViewItem>
            </muxc:NavigationView.FooterMenuItems>

            <Frame x:Name="ContentFrame" />
        </muxc:NavigationView>

        <Popup x:Name="FullScreenPopup" IsLightDismissEnabled="False">
            <Grid
                x:Name="FullScreenPopupRoot"
                Background="Black">
                <Grid x:Name="FullScreenBackdrop" Background="Black" Opacity="1" />
                <Canvas x:Name="FullScreenCanvas">
                    <ContentControl
                        x:Name="FullScreenPlayerHost"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch" />
                </Canvas>
            </Grid>
        </Popup>
    </Grid>
</Window>
