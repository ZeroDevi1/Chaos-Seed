import { AppTheme } from "../theme.slint";
import { LineEdit } from "std-widgets.slint";

export enum ButtonKind {
    Primary,
    Secondary,
}

export component AppButton inherits Rectangle {
    in property <string> text;
    in property <bool> enabled: true;
    in property <ButtonKind> kind: ButtonKind.Primary;
    callback clicked();

    height: 36px;
    min-width: 92px;
    border-radius: 8px;
    opacity: root.enabled ? 1.0 : 0.55;

    background: root.kind == ButtonKind.Primary
        ? (touch.pressed ? AppTheme.button_primary_bg_pressed
            : (touch.has-hover ? AppTheme.button_primary_bg_hover : AppTheme.button_primary_bg))
        : (touch.pressed ? AppTheme.button_secondary_bg_pressed
            : (touch.has-hover ? AppTheme.button_secondary_bg_hover : AppTheme.button_secondary_bg));

    border-width: root.kind == ButtonKind.Secondary ? 1px : 0px;
    border-color: AppTheme.border_color;

    Text {
        text: root.text;
        color: root.kind == ButtonKind.Primary ? AppTheme.button_primary_fg : AppTheme.button_secondary_fg;
        font-size: 14px;
        font-weight: 600;
        width: 100%;
        height: 100%;
        horizontal-alignment: center;
        vertical-alignment: center;
    }

    touch := TouchArea {
        enabled: root.enabled;
        mouse-cursor: pointer;
        clicked => { root.clicked(); }
    }
}

export component FieldLabel inherits Text {
    in property <string> label;
    text: root.label;
    font-size: 12px;
    color: AppTheme.text_muted;
}

export component AppLineEdit inherits Rectangle {
    // Use Slint's built-in LineEdit widget (Fluent on Windows) so mouse/caret/selection works
    // correctly. Custom theming can be added later if needed.
    height: 36px;

    inner := LineEdit {
        width: parent.width;
        height: parent.height;
    }

    // Re-expose the important API surface.
    in-out property <string> text <=> inner.text;
    in property <string> placeholder-text <=> inner.placeholder-text;
    in property <bool> enabled <=> inner.enabled;
    callback accepted <=> inner.accepted;
    callback edited <=> inner.edited;
}
